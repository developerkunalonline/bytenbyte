{% extends "base.html" %}

{% block title %}My Profile - Canteen{% endblock %}

{% block content %}
<div class="menu-header">
    <div class="container">
        <h1 class="page-title animate__animated animate__fadeInDown">My Profile</h1>
        <p class="page-subtitle animate__animated animate__fadeInUp">Welcome, {{ session.user_name }}!</p>
    </div>
</div>

<section class="menu-section">
    <div class="container">
        <div class="profile-container">
            <div class="profile-info-card animate__animated animate__fadeInUp">
                <h2>Account Information</h2>
                <div class="profile-info">
                    <div class="info-row">
                        <span class="info-label">Name:</span>
                        <span class="info-value">{{ session.user_name }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Email:</span>
                        <span class="info-value">{{ session.user_email }}</span>
                    </div>
                </div>
            </div>

            <div class="orders-section animate__animated animate__fadeInUp">
                <h2>My Orders</h2>
                {% if orders %}
                <div class="orders-grid">
                    {% for order in orders %}
                    <div class="order-card">
                        <div class="order-header">
                            <span class="order-id">Order #{{ order.id }}</span>
                            <span class="order-date">{{ order.datetime }}</span>
                        </div>
                        <div class="order-body">
                            <div class="order-detail">
                                <span>Subtotal:</span>
                                <span>â‚¹{{ "%.2f"|format(order.subtotal) }}</span>
                            </div>
                            <div class="order-detail">
                                <span>Tax:</span>
                                <span>â‚¹{{ "%.2f"|format(order.tax) }}</span>
                            </div>
                            <div class="order-detail order-total">
                                <span>Total:</span>
                                <span>â‚¹{{ "%.2f"|format(order.total) }}</span>
                            </div>
                        </div>
                        <div class="order-footer">
                            <a href="{{ url_for('bill', order_id=order.id) }}" class="btn btn-primary btn-small">View Invoice</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-orders">
                    <div class="empty-icon">ðŸ“¦</div>
                    <p>You haven't placed any orders yet</p>
                    <a href="{{ url_for('menu') }}" class="btn btn-primary">Browse Menu</a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}
